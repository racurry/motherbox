[user]
  email = aaroncurry@gmail.com
	name = Aaron Curry
  signingkey = ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPFgJeR2xvRDGOb0/QZpdHU3B75y3KnHymp3sG5pGrzB

# Work-specific settings; basically, user & signing key
[includeIf "gitdir:~/workspace/galileo/"]
  path = ~/.gitconfig_galileo

[gpg]
  format = ssh
[gpg "ssh"]
  program = "/Applications/1Password.app/Contents/MacOS/op-ssh-sign"
[commit]
  gpgsign = true

[alias]
  # ─────────────────────────────────────────────────────────────
  # Shortcuts
  # ─────────────────────────────────────────────────────────────
  a = add
  aa = add -A
  ci = commit
  co = checkout
  cb = checkout -b
  st = status
  br = branch

  # ─────────────────────────────────────────────────────────────
  # Branch Info
  # ─────────────────────────────────────────────────────────────
  # What's your default branch?
  default-branch = "!git symbolic-ref refs/remotes/origin/HEAD | cut -f4 -d/"
  brdef = !git default-branch
  # What branch is this?
  branch-name = !git rev-parse --abbrev-ref HEAD
  brname = !git branch-name
  # Which branches have been merged?
  merged-branches = !git branch --merged
  brmerged = !git merged-branches

  # ─────────────────────────────────────────────────────────────
  # Logging
  # ─────────────────────────────────────────────────────────────
  # Prettier, easier to follow logs
  lol = log --graph --date=relative --pretty=tformat:'%Cred%h%Creset -%C(auto)%d%Creset %s %Cgreen(%an %ad)%Creset'
  lds = log --pretty=format:\"%C(yellow)%h\\ %ad%Cred%d\\ %Creset%s%Cblue\\ [%cn]\" --decorate --date=short

  # ─────────────────────────────────────────────────────────────
  # Pulling & Syncing
  # ─────────────────────────────────────────────────────────────
  # I like rebases
  pur = pull --rebase
  # Stash, pull, and reapply
  restash = !git stash push -u -m \"Auto-stash $(date +%Y-%m-%d)\" && git pull --rebase && git stash pop
  # Stash, rebase onto latest default branch, reapply
  resync = !git stash push -u -m \"Auto-stash $(date +%Y-%m-%d)\" && git fetch origin && git rebase origin/$(git default-branch) && git stash pop
  # Go to default branch, pull, cleanup
  reup = !git checkout $(git default-branch) && git pull --rebase && git cleanup

  # ─────────────────────────────────────────────────────────────
  # Committing
  # ─────────────────────────────────────────────────────────────
  # Add and commit everything
  aco = !git add -A && git commit -m
  # Unstage files
  unstage = reset HEAD --
  # Pull the latest commit off, but leave the changes staged
  uncommit = reset --soft HEAD~1
  # Amend without editing the message
  amend = commit --amend --no-edit
  # Add everything and amend
  oops = !git add . && git amend
  # Diff staged changes
  diffc = diff --cached

  # ─────────────────────────────────────────────────────────────
  # Pushing
  # ─────────────────────────────────────────────────────────────
  # Push and set upstream
  publish = !git push -u origin $(git branch-name)
  pub = !git publish
  # Don't accidentally clobber someone else's stuff
  pushf = push --force-with-lease
  # Oops, and force push
  oopspush = !git oops && git pushf
  # Add, commit, rebase, then push
  gobig = !git add -A && git commit && git pull --rebase && git push
  # Rebase onto latest default branch and force push
  rebase-and-push = !git fetch origin && git rebase origin/$(git default-branch) && git push --force-with-lease
  pubf = !git rebase-and-push

  # ─────────────────────────────────────────────────────────────
  # Cleanup
  # ─────────────────────────────────────────────────────────────
  # Delete local branches that have been merged
  cleanup-merged = !git branch --merged | grep -v -e $(git default-branch) -e '\\*' | xargs -n 1 git branch -d 2>/dev/null || true
  # Delete local branches whose remotes are gone
  cleanup-gone = !git branch --format='%(refname:short) %(upstream:track)' | grep '\\[gone\\]' | awk '{print $1}' | xargs -r git branch -D
  # Run both cleanups and prune remotes
  cleanup = !git cleanup-merged && git cleanup-gone && git remote prune origin

  # ─────────────────────────────────────────────────────────────
  # Nuclear Options
  # ─────────────────────────────────────────────────────────────
  # Kill everything locally
  wipe = !git reset --hard && git clean -fd

[core]
  excludesfile = ~/.gitignore_global
  pager = "diff-so-fancy | less --tabs=4"
  editor = "code --wait"

[diff]
  # Show renames/moves as such
  renames = true

[status]
  # Recursively traverse untracked directories to display all contents
  showUntrackedFiles = all

[color]
	ui = true

[color "diff-highlight"]
	oldNormal = red bold
	oldHighlight = red bold 52
	newNormal = green bold
	newHighlight = green bold 22

[color "diff"]
	meta = 11
	frag = magenta bold
	commit = yellow bold
	old = red bold
	new = green bold
	whitespace = red reverse
[push]
	followTags = true
[pull]
	rebase = true
[fetch]
	prune = true
	pruneTags = true
[rebase]
	autostash = true
[rerere]
	enabled = true
[help]
	autocorrect = prompt
[submodule]
	recurse = true
[init]
	defaultBranch = main


